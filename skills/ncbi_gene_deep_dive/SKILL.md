---
name: ncbi_gene_deep_dive
description: "NCBI Gene Deep Dive - Deep dive into NCBI gene: metadata, dataset report, product report, orthologs, and gene links. Use this skill for gene biology tasks involving get gene metadata by gene name get gene dataset report by id get gene product report by id get gene orthologs get gene links by id. Combines 5 tools from 1 SCP server(s)."
---

# NCBI Gene Deep Dive

**Discipline**: Gene Biology | **Tools Used**: 5 | **Servers**: 1

## Description

Deep dive into NCBI gene: metadata, dataset report, product report, orthologs, and gene links.

## Tools Used

- **`get_gene_metadata_by_gene_name`** from `ncbi-server` (streamable-http) - `https://scp.intern-ai.org.cn/api/v1/mcp/9/Origene-NCBI`
- **`get_gene_dataset_report_by_id`** from `ncbi-server` (streamable-http) - `https://scp.intern-ai.org.cn/api/v1/mcp/9/Origene-NCBI`
- **`get_gene_product_report_by_id`** from `ncbi-server` (streamable-http) - `https://scp.intern-ai.org.cn/api/v1/mcp/9/Origene-NCBI`
- **`get_gene_orthologs`** from `ncbi-server` (streamable-http) - `https://scp.intern-ai.org.cn/api/v1/mcp/9/Origene-NCBI`
- **`get_gene_links_by_id`** from `ncbi-server` (streamable-http) - `https://scp.intern-ai.org.cn/api/v1/mcp/9/Origene-NCBI`

## Workflow

1. Get gene metadata
2. Get dataset report
3. Get product report
4. Get orthologs
5. Get gene links

## Test Case

### Input
```json
{
    "gene_name": "TP53",
    "gene_id": 7157
}
```

### Expected Steps
1. Get gene metadata
2. Get dataset report
3. Get product report
4. Get orthologs
5. Get gene links

## Usage Example

> **Note:** Replace `<YOUR_SCP_HUB_API_KEY>` with your own SCP Hub API Key. You can obtain one from the [SCP Platform](https://scp.intern-ai.org.cn).

```python
import asyncio
import json
from mcp import ClientSession
from mcp.client.streamable_http import streamablehttp_client
from mcp.client.sse import sse_client

SERVERS = {
    "ncbi-server": "https://scp.intern-ai.org.cn/api/v1/mcp/9/Origene-NCBI"
}

async def connect(url, transport_type):
    transport = streamablehttp_client(url=url, headers={"SCP-HUB-API-KEY": "<YOUR_SCP_HUB_API_KEY>"})
    read, write, _ = await transport.__aenter__()
    ctx = ClientSession(read, write)
    session = await ctx.__aenter__()
    await session.initialize()
    return session, ctx, transport

def parse(result):
    try:
        if hasattr(result, 'content') and result.content:
            c = result.content[0]
            if hasattr(c, 'text'):
                try: return json.loads(c.text)
                except: return c.text
        return str(result)
    except: return str(result)

async def main():
    # Connect to required servers
    sessions = {}
    sessions["ncbi-server"], _, _ = await connect("https://scp.intern-ai.org.cn/api/v1/mcp/9/Origene-NCBI", "streamable-http")

    # Execute workflow steps
    # Step 1: Get gene metadata
    result_1 = await sessions["ncbi-server"].call_tool("get_gene_metadata_by_gene_name", arguments={})
    data_1 = parse(result_1)
    print(f"Step 1 result: {json.dumps(data_1, indent=2, ensure_ascii=False)[:500]}")

    # Step 2: Get dataset report
    result_2 = await sessions["ncbi-server"].call_tool("get_gene_dataset_report_by_id", arguments={})
    data_2 = parse(result_2)
    print(f"Step 2 result: {json.dumps(data_2, indent=2, ensure_ascii=False)[:500]}")

    # Step 3: Get product report
    result_3 = await sessions["ncbi-server"].call_tool("get_gene_product_report_by_id", arguments={})
    data_3 = parse(result_3)
    print(f"Step 3 result: {json.dumps(data_3, indent=2, ensure_ascii=False)[:500]}")

    # Step 4: Get orthologs
    result_4 = await sessions["ncbi-server"].call_tool("get_gene_orthologs", arguments={})
    data_4 = parse(result_4)
    print(f"Step 4 result: {json.dumps(data_4, indent=2, ensure_ascii=False)[:500]}")

    # Step 5: Get gene links
    result_5 = await sessions["ncbi-server"].call_tool("get_gene_links_by_id", arguments={})
    data_5 = parse(result_5)
    print(f"Step 5 result: {json.dumps(data_5, indent=2, ensure_ascii=False)[:500]}")

    # Cleanup
    print("Workflow complete!")

if __name__ == "__main__":
    asyncio.run(main())
```
